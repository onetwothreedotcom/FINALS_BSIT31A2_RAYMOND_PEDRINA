@model IEnumerable<Pet_Adoption_Forum.Models.AdoptionRequest>
@{
    ViewData["Title"] = "Admin Dashboard";
    var availablePets = ViewBag.AvailablePets as List<Pet_Adoption_Forum.Models.Pet> ?? new List<Pet_Adoption_Forum.Models.Pet>();
    var adoptedPets = ViewBag.AdoptedPets as List<Pet_Adoption_Forum.Models.Pet> ?? new List<Pet_Adoption_Forum.Models.Pet>();
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Admin Dashboard</h2>
    <div>
        <a class="btn btn-primary" href="@Url.Action("AddPet", "Admin")">Add New Pet</a>
        <a class="btn btn-secondary" href="@Url.Action("Logout", "Admin")">Logout</a>
    </div>
</div>

<h3>Pending Adoption Requests</h3>
@if (Model.Any())
{
    <table class="table table-striped mb-4">
        <thead>
            <tr>
                <th>Pet</th>
                <th>Full Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Age</th>
                <th>Request Date</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var request in Model)
            {
                <tr>
                    <td>@(request.Pet?.Name ?? request.PetName)</td>
                    <td>@request.FullName</td>
                    <td>@request.Email</td>
                    <td>@request.PhoneNumber</td>
                    <td>@request.Age</td>
                    <td>@request.RequestDate.ToString("MMM dd, yyyy")</td>
                    <td>
                        <form asp-action="ApproveAdoption" method="post" style="display: inline;">
                            <input type="hidden" name="id" value="@request.Id" />
                            <button type="submit" class="btn btn-success btn-sm">Approve</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p class="text-muted">No pending requests.</p>
}

<hr />

<h3>Available Pets</h3>
@if (availablePets.Any())
{
    <div class="row mb-4">
        @foreach (var pet in availablePets)
        {
            <div class="col-md-4 mb-3">
                <div class="card">
                    <img src="@pet.ImageUrl" class="card-img-top" alt="@pet.Name" style="height: 200px; object-fit: cover;" />
                    <div class="card-body">
                        <h5 class="card-title">@pet.Name</h5>
                        <p class="card-text">@pet.Breed - @pet.Age yrs</p>
                        <a class="btn btn-sm btn-primary" href="@Url.Action("EditPet", "Admin", new { id = pet.Id })">Edit</a>
                    </div>
                </div>
            </div>
        }
    </div>
}
else
{
    <p class="text-muted">No available pets.</p>
}

<hr />

<h3>Adopted Pets</h3>
@if (adoptedPets.Any())
{
    <div class="row">
        @foreach (var pet in adoptedPets)
        {
            <div class="col-md-4 mb-3">
                <div class="card">
                    <img src="@pet.ImageUrl" class="card-img-top" alt="@pet.Name" style="height: 200px; object-fit: cover;" />
                    <div class="card-body">
                        <h5 class="card-title">@pet.Name</h5>
                        <p class="card-text">@pet.Breed - @pet.Age yrs</p>
                        <span class="badge bg-success">Adopted</span>
                        <a class="btn btn-sm btn-secondary" href="@Url.Action("EditPet", "Admin", new { id = pet.Id })">View/Edit</a>
                    </div>
                </div>
            </div>
        }
    </div>
}
else
{
    <p class="text-muted">No adopted pets yet.</p>
}
